@import '@bolt/core-v3.x';

/* ------------------------------------ *\
   Navbar
\* ------------------------------------ */

.c-bolt-navbar--sticky {
  position: sticky;
  top: 0;
  right: 0;
  left: 0;
  z-index: bolt-z-index(nav);
}

.c-bolt-navbar--static {
  position: relative;
}

.c-bolt-navbar__inner {
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: relative;
  padding-top: var(--bolt-spacing-y-small);
  padding-right: calc(var(--bolt-page-padding-x));
  padding-bottom: var(--bolt-spacing-y-small);
  padding-left: var(--bolt-page-padding-x);
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.2);

  @each $size in $bolt-spacing-multiplier-system {
    $size-name: nth($size, 1);

    @if (
      $size-name !=
        'xxsmall' and
        $size-name !=
        'large' and
        $size-name !=
        'xlarge' and
        $size-name !=
        'xxlarge'
    ) {
      @at-root .c-bolt-navbar--spacing-#{$size-name} & {
        padding-top: var(--bolt-spacing-y-#{$size-name});
        padding-bottom: var(--bolt-spacing-y-#{$size-name});
      }
    }
  }

  @at-root .c-bolt-navbar.has-list & {
    padding-right: calc(
      var(--bolt-page-padding-x) - var(--bolt-spacing-x-small)
    ); // Offsets item padding

    @include bolt-mq($until: xsmall) {
      display: grid;
      padding: 0;
      grid-template-columns: auto 1fr;
      grid-template-rows: 1fr auto;
    }
  }

  // @include bolt-mq(xsmall) {
  //   > * {
  //     padding-bottom: var(--bolt-spacing-y-small);
  //   }
  // }

  > *:not(:last-child) {
    margin-right: var(--bolt-spacing-x-small);
  }

  // @at-root .c-bolt-navbar--center & {
  //   @include bolt-mq(xsmall) {
  //     flex-wrap: wrap;
  //     justify-content: center;
  //     // Below xsmall this causes unwanted space above mobile menu.
  //     padding-top: var(--bolt-spacing-y-xsmall);
  //   }

  //   > * {
  //     padding-bottom: var(--bolt-spacing-y-xsmall);
  //   }

  //   > *:first-child {
  //     align-self: center;
  //     padding-top: var(--bolt-spacing-y-xsmall);
  //   }

  //   > *:only-child {
  //     padding-top: var(--bolt-spacing-y-xsmall);
  //     padding-bottom: var(--bolt-spacing-y-xsmall);
  //   }
  // }

  @at-root .c-bolt-navbar--align-items-start & {
    justify-content: flex-start;
  }

  @at-root .c-bolt-navbar--align-items-center & {
    justify-content: center;
  }

  @at-root .c-bolt-navbar--align-items-end & {
    justify-content: flex-end;
  }

  @at-root .c-bolt-navbar:not(.c-bolt-navbar--auto-width) & {
    @include bolt-full-bleed;
  }

  @at-root .c-bolt-navbar--auto-width & {
    padding-right: var(--bolt-spacing-x-medium);
    padding-left: var(--bolt-spacing-x-medium);

    // @include bolt-mq($until: xsmall) {
    //   padding-right: 0;
    //   padding-left: 0;
    // }
  }

  @at-root .c-bolt-navbar--auto-width.has-list & {
    padding-right: calc(
      var(--bolt-spacing-x-medium) - var(--bolt-spacing-x-small)
    ); // Offsets item padding
  }
}

.c-bolt-navbar__content-wrapper {
  @at-root .c-bolt-navbar.has-list & {
    display: flex;
    // flex-shrink: 4; // shrink faster than other components in tight spots
    align-self: center;
    position: relative;
  }
  @at-root .c-bolt-navbar:not(.is-ready) & {
    background-attachment: local, local, scroll, scroll;
    background-position: 0 0, 100% 0, 0 0, 100% 0;
    background-repeat: no-repeat;
    background-size: 4em 100%, 4em 100%, 1em 100%, 1em 100%;
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden; // active item pseudo element will cause vertical scrollbars
  }
}
