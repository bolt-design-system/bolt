{#
/**
 * Text Link Element
 *
 * Available variables:
 * - Reference text-link.schema.js
 *
 * Dev notes
 * 1. The markup is written in one line (combined with spaceless) to avoid any unwanted white-space.
 * 2. Zero width no-break space is passed to icon-wrapper's :before and :after pseudo elements, combine that with nowrap white-space on icon-wrapper, and it will make sure that an icon never wraps to the next line by itself, it will always wrap with the final word of the text. Do not remove the icon-wrapper spans. See: https://codepen.io/snookca/pen/JBdBVZ?editors=0100
 */
#}

{# Schema Validation #}
{% set schema = bolt.data.elements['@bolt-elements-text-link'].schema %}
{% if enable_json_schema_validation %}
  {{ validate_data_schema(schema, _self)|raw }}
{% endif %}

{# Variables #}
{% set this = init(schema) %}
{% set attributes = create_attribute(attributes|default({})) %}

{% if icon_before.name %}
  {% set icon_before_template %}
    {% include '@bolt-components-icon/icon.twig' with {
      name: icon_before.name,
      size: icon_before.size,
    } only %}
  {% endset %}
  {% set icon_before_slot %}
    <span class="e-bolt-text-link__icon-wrapper">{{ icon_before_template|spaceless }}</span>
  {% endset %}
{% elseif icon_before %}
  {% set icon_before_slot %}
    <span class="e-bolt-text-link__icon-wrapper">{{ icon_before|spaceless }}</span>
  {% endset %}
{% endif %}

{% if icon_after.name %}
  {% set icon_after_template %}
    {% include '@bolt-components-icon/icon.twig' with {
      name: icon_after.name,
      size: icon_after.size,
    } only %}
  {% endset %}
  {% set icon_after_slot %}
    <span class="e-bolt-text-link__icon-wrapper">{{ icon_after_template|spaceless }}</span>
  {% endset %}
{% elseif icon_after %}
  {% set icon_after_slot %}
    <span class="e-bolt-text-link__icon-wrapper">{{ icon_after|spaceless }}</span>
  {% endset %}
{% endif %}

{% if button %}
  {% set tag = 'button' %}
{% else %}
  {% set tag = 'a' %}
{% endif %}

{% set classes = [
  'e-bolt-text-link',
  icon_before ? 'e-bolt-text-link--icon-before',
  icon_after ? 'e-bolt-text-link--icon-after',
  reversed_underline ? 'e-bolt-text-link--reversed-underline',
  display == 'block' ? 'e-bolt-text-link--block',
] %}

{# Template #}
{# @devs: [1], [2] #}
{% spaceless %}<{{ tag }} {{ attributes.addClass(classes) }}>{{ icon_before_slot|spaceless }}{{ content }}{{ icon_after_slot|spaceless }}</{{ tag }}>{% endspaceless %}
