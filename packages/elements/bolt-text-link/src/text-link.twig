{% set schema = bolt.data.elements['@bolt-elements-text-link'].schema %}

{% if enable_json_schema_validation %}
  {{ validate_data_schema(schema, _self) | raw }}
{% endif %}

{# Variables #}
{% set this = init(schema) %}
{% set attributes = create_attribute(attributes|default({})) %}

{% if icon_before.name %}
  {% set icon_before_slot %}
    {% include '@bolt-components-icon/icon.twig' with {
      name: icon_before.name,
      size: icon_before.size,
    } only %}
  {% endset %}
{% else %}
  {% set icon_before_slot = icon_before %}
{% endif %}

{% if icon_after.name %}
  {% set icon_after_slot %}
    {% include '@bolt-components-icon/icon.twig' with {
      name: icon_after.name,
      size: icon_after.size,
    } only %}
  {% endset %}
{% else %}
  {% set icon_after_slot = icon_after %}
{% endif %}

{% if button %}
  {% set tag = 'button' %}
{% else %}
  {% set tag = 'a' %}
{% endif %}

{% set classes = [
  'e-bolt-link',
  icon_before ? 'e-bolt-link--icon-before',
  icon_after ? 'e-bolt-link--icon-after',
  reversed_underline ? 'e-bolt-link--reversed-underline',
  display == 'block' ? 'e-bolt-link--block',
] %}

{# All of this is written in one line to avoid any unwanted white-space. #}
<{{ tag }} {{ attributes.addClass(classes) }}>
  {{ icon_before_slot|spaceless }}{{ content }}{{ icon_after_slot|spaceless }}
</{{ tag }}>
