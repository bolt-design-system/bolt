{% import "@bolt-blueprints/macros.twig" as macros %}

{% set cardContentItems = [
    {
      cardUrl: "#!",
      cardSubtitle: "Mission",
      cardTitle: bolt.faker.sentence(3),
      cardMetaItems: [
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "#{bolt.faker.numberBetween(2,10)} Modules",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "1 Challenge",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "25% complete",
          attributes: {
            class: ["u-bolt-color-orange"]
          }
        }, false)
      ],
      cardGradient: "purple",
      cardIcon: "launchpad",
      cardDescription: bolt.faker.paragraph(2),
      removeButton: true,
      cardStatusItems: [
        macros.include("@bolt-components-headline/eyebrow.twig", {
          text: "Last activity: 3 days ago",
          align: "center",
          attributes: {
            class: ["u-bolt-padding-small"]
          }
        }, false)
      ]
    },
    {
      cardUrl: "#!",
      cardSubtitle: "Mission",
      cardTitle: bolt.faker.sentence(3),
      cardMetaItems: [
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "#{bolt.faker.numberBetween(2,10)} Modules",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "1 Challenge",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "10% complete",
          attributes: {
            class: ["u-bolt-color-orange"]
          }
        }, false)
      ],
      cardGradient: "purple",
      cardIcon: "launchpad",
      cardDescription: bolt.faker.paragraph(2),
      removeButton: true,
      cardStatusItems: [
        macros.include("@bolt-components-headline/eyebrow.twig", {
          text: "Last activity: 12/21/19",
          align: "center",
          attributes: {
            class: ["u-bolt-padding-small"]
          }
        }, false),
        macros.include("@bolt-components-headline/eyebrow.twig", {
          text: "Assigned",
          align: "center",
          attributes: {
            class: ["u-bolt-padding-small"]
          }
        }, false)
      ]
    },
    {
      cardUrl: "#!",
      cardSubtitle: "Mission",
      cardTitle: bolt.faker.sentence(3),
      cardMetaItems: [
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "#{bolt.faker.numberBetween(2,10)} Modules",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "1 Challenge",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "10% complete",
          attributes: {
            class: ["u-bolt-color-orange"]
          }
        }, false)
      ],
      cardGradient: "purple",
      cardIcon: "launchpad",
      cardDescription: bolt.faker.paragraph(2),
      removeButton: true,
      cardStatusItems: [
        macros.include("@bolt-components-headline/eyebrow.twig", {
          text: "Last activity: 12/21/19",
          align: "center",
          attributes: {
            class: ["u-bolt-padding-small"]
          }
        }, false)
      ]
    },
    {
      cardUrl: "#!",
      cardSubtitle: "Mission",
      cardTitle: bolt.faker.sentence(3),
      cardMetaItems: [
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "#{bolt.faker.numberBetween(2,10)} Modules",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "1 Challenge",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "25% complete",
          attributes: {
            class: ["u-bolt-color-orange"]
          }
        }, false)
      ],
      cardGradient: "purple",
      cardIcon: "launchpad",
      cardDescription: bolt.faker.paragraph(2),
      cardUtilityItems: [
        macros.include("@bolt-components-button/button.twig", {
          text: "Share",
          size: "xsmall",
          style: "text",
          icon: {
            name: "share",
            size: "small"
          },
          iconOnly: true
        }, false ),
        macros.include("@bolt-components-button/button.twig", {
          text: "Remove from Dashboard",
          size: "xsmall",
          style: "text",
          icon: {
            name: "close",
            size: "small"
          },
          iconOnly: true
        }, false )
      ],
      cardStatusItems: [
        macros.include("@bolt-components-headline/eyebrow.twig", {
          text: "Last activity: 3 days ago",
          align: "center",
          attributes: {
            class: ["u-bolt-padding-small"]
          }
        }, false)
      ]
    },
    {
      cardUrl: "#!",
      cardSubtitle: "Mission",
      cardTitle: bolt.faker.sentence(3),
      cardMetaItems: [
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "#{bolt.faker.numberBetween(2,10)} Modules",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "1 Challenge",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "10% complete",
          attributes: {
            class: ["u-bolt-color-orange"]
          }
        }, false)
      ],
      cardGradient: "purple",
      cardIcon: "launchpad",
      cardDescription: bolt.faker.paragraph(2),
      cardUtilityItems: [
        macros.include("@bolt-components-button/button.twig", {
          text: "Share",
          size: "xsmall",
          style: "text",
          icon: {
            name: "share",
            size: "small"
          },
          iconOnly: true
        }, false ),
        macros.include("@bolt-components-button/button.twig", {
          text: "Remove from Dashboard",
          size: "xsmall",
          style: "text",
          icon: {
            name: "close",
            size: "small"
          },
          iconOnly: true,
          disabled: true
        }, false )
      ],
      cardStatusItems: [
        macros.include("@bolt-components-headline/eyebrow.twig", {
          text: "Last activity: 12/21/19",
          align: "center",
          attributes: {
            class: ["u-bolt-padding-small"]
          }
        }, false),
        macros.include("@bolt-components-headline/eyebrow.twig", {
          text: "Assigned",
          align: "center",
          attributes: {
            class: ["u-bolt-padding-small"]
          }
        }, false)
      ]
    },
    {
      cardUrl: "#!",
      cardSubtitle: "Mission",
      cardTitle: bolt.faker.sentence(3),
      cardMetaItems: [
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "#{bolt.faker.numberBetween(2,10)} Modules",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "1 Challenge",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "10% complete",
          attributes: {
            class: ["u-bolt-color-orange"]
          }
        }, false)
      ],
      cardGradient: "purple",
      cardIcon: "launchpad",
      cardDescription: bolt.faker.paragraph(2),
      cardUtilityItems: [
        macros.include("@bolt-components-button/button.twig", {
          text: "Share",
          size: "xsmall",
          style: "text",
          icon: {
            name: "share",
            size: "small"
          },
          iconOnly: true
        }, false ),
        macros.include("@bolt-components-button/button.twig", {
          text: "Remove from Dashboard",
          size: "xsmall",
          style: "text",
          icon: {
            name: "close",
            size: "small"
          },
          iconOnly: true,
        }, false )
      ],
      cardStatusItems: [
        macros.include("@bolt-components-headline/eyebrow.twig", {
          text: "Last activity: 12/21/19",
          align: "center",
          attributes: {
            class: ["u-bolt-padding-small"]
          }
        }, false)
      ]
    },
    {
      cardUrl: "#!",
      cardSubtitle: "Mission",
      cardTitle: bolt.faker.sentence(3),
      cardMetaItems: [
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "#{bolt.faker.numberBetween(2,10)} Modules",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "1 Challenge",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "25% complete",
          attributes: {
            class: ["u-bolt-color-orange"]
          }
        }, false)
      ],
      cardGradient: "purple",
      cardIcon: "launchpad",
      cardDescription: bolt.faker.paragraph(2),
      cardUtilityItems: [
        macros.include("@bolt-components-button/button.twig", {
          text: "Share",
          size: "xsmall",
          style: "text",
          icon: {
            name: "share",
            size: "small"
          },
          iconOnly: true
        }, false ),
        macros.include("@bolt-components-button/button.twig", {
          text: "Remove from Dashboard",
          size: "xsmall",
          style: "text",
          icon: {
            name: "close",
            size: "small"
          },
          iconOnly: true
        }, false )
      ],
      cardStatusItems: [
        macros.include("@bolt-components-headline/eyebrow.twig", {
          text: "Last activity: 3 days ago",
          align: "center",
          attributes: {
            class: ["u-bolt-padding-small"]
          }
        }, false)
      ]
    },
    {
      cardUrl: "#!",
      cardSubtitle: "Mission",
      cardTitle: bolt.faker.sentence(3),
      cardMetaItems: [
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "#{bolt.faker.numberBetween(2,10)} Modules",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "1 Challenge",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "10% complete",
          attributes: {
            class: ["u-bolt-color-orange"]
          }
        }, false)
      ],
      cardGradient: "purple",
      cardIcon: "launchpad",
      cardDescription: bolt.faker.paragraph(2),
      cardUtilityItems: [
        macros.include("@bolt-components-button/button.twig", {
          text: "Share",
          size: "xsmall",
          style: "text",
          icon: {
            name: "share",
            size: "small"
          },
          iconOnly: true
        }, false ),
        macros.include("@bolt-components-button/button.twig", {
          text: "Remove from Dashboard",
          size: "xsmall",
          style: "text",
          icon: {
            name: "close",
            size: "small"
          },
          iconOnly: true,
          disabled: true
        }, false )
      ],
      cardStatusItems: [
        macros.include("@bolt-components-headline/eyebrow.twig", {
          text: "Last activity: 12/21/19",
          align: "center",
          attributes: {
            class: ["u-bolt-padding-small"]
          }
        }, false),
        macros.include("@bolt-components-headline/eyebrow.twig", {
          text: "Assigned",
          align: "center",
          attributes: {
            class: ["u-bolt-padding-small"]
          }
        }, false)
      ]
    },
    {
      cardUrl: "#!",
      cardSubtitle: "Mission",
      cardTitle: bolt.faker.sentence(3),
      cardMetaItems: [
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "#{bolt.faker.numberBetween(2,10)} Modules",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "1 Challenge",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "10% complete",
          attributes: {
            class: ["u-bolt-color-orange"]
          }
        }, false)
      ],
      cardGradient: "purple",
      cardIcon: "launchpad",
      cardDescription: bolt.faker.paragraph(2),
      cardUtilityItems: [
        macros.include("@bolt-components-button/button.twig", {
          text: "Share",
          size: "xsmall",
          style: "text",
          icon: {
            name: "share",
            size: "small"
          },
          iconOnly: true
        }, false ),
        macros.include("@bolt-components-button/button.twig", {
          text: "Remove from Dashboard",
          size: "xsmall",
          style: "text",
          icon: {
            name: "close",
            size: "small"
          },
          iconOnly: true,
        }, false )
      ],
      cardStatusItems: [
        macros.include("@bolt-components-headline/eyebrow.twig", {
          text: "Last activity: 12/21/19",
          align: "center",
          attributes: {
            class: ["u-bolt-padding-small"]
          }
        }, false)
      ]
    },
    {
      cardUrl: "#!",
      cardSubtitle: "Mission",
      cardTitle: bolt.faker.sentence(3),
      cardMetaItems: [
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "#{bolt.faker.numberBetween(2,10)} Modules",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "1 Challenge",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "25% complete",
          attributes: {
            class: ["u-bolt-color-orange"]
          }
        }, false)
      ],
      cardGradient: "purple",
      cardIcon: "launchpad",
      cardDescription: bolt.faker.paragraph(2),
      cardUtilityItems: [
        macros.include("@bolt-components-button/button.twig", {
          text: "Share",
          size: "xsmall",
          style: "text",
          icon: {
            name: "share",
            size: "small"
          },
          iconOnly: true
        }, false ),
        macros.include("@bolt-components-button/button.twig", {
          text: "Remove from Dashboard",
          size: "xsmall",
          style: "text",
          icon: {
            name: "close",
            size: "small"
          },
          iconOnly: true
        }, false )
      ],
      cardStatusItems: [
        macros.include("@bolt-components-headline/eyebrow.twig", {
          text: "Last activity: 3 days ago",
          align: "center",
          attributes: {
            class: ["u-bolt-padding-small"]
          }
        }, false)
      ]
    },
    {
      cardUrl: "#!",
      cardSubtitle: "Mission",
      cardTitle: bolt.faker.sentence(3),
      cardMetaItems: [
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "#{bolt.faker.numberBetween(2,10)} Modules",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "1 Challenge",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "10% complete",
          attributes: {
            class: ["u-bolt-color-orange"]
          }
        }, false)
      ],
      cardGradient: "purple",
      cardIcon: "launchpad",
      cardDescription: bolt.faker.paragraph(2),
      cardUtilityItems: [
        macros.include("@bolt-components-button/button.twig", {
          text: "Share",
          size: "xsmall",
          style: "text",
          icon: {
            name: "share",
            size: "small"
          },
          iconOnly: true
        }, false ),
        macros.include("@bolt-components-button/button.twig", {
          text: "Remove from Dashboard",
          size: "xsmall",
          style: "text",
          icon: {
            name: "close",
            size: "small"
          },
          iconOnly: true,
          disabled: true
        }, false )
      ],
      cardStatusItems: [
        macros.include("@bolt-components-headline/eyebrow.twig", {
          text: "Last activity: 12/21/19",
          align: "center",
          attributes: {
            class: ["u-bolt-padding-small"]
          }
        }, false),
        macros.include("@bolt-components-headline/eyebrow.twig", {
          text: "Assigned",
          align: "center",
          attributes: {
            class: ["u-bolt-padding-small"]
          }
        }, false)
      ]
    },
    {
      cardUrl: "#!",
      cardSubtitle: "Mission",
      cardTitle: bolt.faker.sentence(3),
      cardMetaItems: [
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "#{bolt.faker.numberBetween(2,10)} Modules",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "1 Challenge",
        }, false),
        macros.include("@bolt-components-headline/text.twig", {
          size: "small",
          weight: "bold",
          text: "10% complete",
          attributes: {
            class: ["u-bolt-color-orange"]
          }
        }, false)
      ],
      cardGradient: "purple",
      cardIcon: "launchpad",
      cardDescription: bolt.faker.paragraph(2),
      cardUtilityItems: [
        macros.include("@bolt-components-button/button.twig", {
          text: "Share",
          size: "xsmall",
          style: "text",
          icon: {
            name: "share",
            size: "small"
          },
          iconOnly: true
        }, false ),
        macros.include("@bolt-components-button/button.twig", {
          text: "Remove from Dashboard",
          size: "xsmall",
          style: "text",
          icon: {
            name: "close",
            size: "small"
          },
          iconOnly: true,
        }, false )
      ],
      cardStatusItems: [
        macros.include("@bolt-components-headline/eyebrow.twig", {
          text: "Last activity: 12/21/19",
          align: "center",
          attributes: {
            class: ["u-bolt-padding-small"]
          }
        }, false)
      ]
    },
] %}


{# @todo: uncomment + rename the cardContentItems variable used in the include w/ processedCards below to auto-add extra whitespace to better equalize card heights #}

{#
{% set maxLength = 0 %}
{% for item in cardContentItems %}
  {% if item.cardTitle | length > maxLength %}
    {% set maxLength = item.cardTitle | length %}
  {% endif %}
{% endfor %}

{% set processedCards = [] %}
{% for item in cardContentItems %}
  {% if item.cardTitle | length < maxLength %}
    {% set numberOfExtraChars = maxLength - item.cardTitle | length %}
    {% set extraChars = '' %}

    {% for i in 0..numberOfExtraChars %}
      {% set extraChars = extraChars ~ '&emsp;' %}
    {% endfor %}
    {% set item = item | merge({
      cardTitle: item.cardTitle ~ ' ' ~ extraChars
    }) %}
  {% endif %}

  {% set processedCards = processedCards | merge([item]) %}
{% endfor %} #}

{% if showAll %}
  {% set count %}{% spaceless %}
    {% include "@bolt-components-headline/text.twig" with {
      text: "(12)",
      size: "small",
      tag: "span",
      attributes: {
        class: [
          "u-bolt-inline"
        ]
      }
    } only %}
  {% endspaceless %}{% endset %}
  {% set sectionTitle = "My Missions " ~ count %}
  {% set sectionButtons = false %}
  {% set useCarousel = false %}
{% endif %}

{% if addMission %}
  {% set content %}
    <div class="u-bolt-padding-medium u-bolt-padding-top-xlarge u-bolt-padding-bottom-xlarge u-bolt-text-align-center">
      {% include "@bolt-components-icon/icon.twig" with {
        name: "add",
        size: "large",
        attributes: {
          class: [
            "u-bolt-margin-bottom-small",
            "u-bolt-color-gray"
          ]
        }
      }%}
      {% include "@bolt-components-headline/text.twig" with {
        text: "Add Mission",
        size: "xlarge",
        attributes: {
          class: [
            "u-bolt-color-gray"
          ]
        }
      } only %}
    </div>
  {% endset %}

  {% set emptyCard %}
    {% include "@bolt-components-card-replacement/card-replacement.twig" with {
      link: {
        url: "#!",
        text: "Add Mission"
      },
      theme: "none",
      body: {
        content: content
      }
    } only %}
  {% endset %}

  {% set cardContentItems = [emptyCard] %}
  {% set sectionButtons = false %}
{% endif %}


{% include "@bolt-blueprints/_dashboard-band.twig" with {
  sectionTitle: sectionTitle|default("My Missions"),
  theme: "light",
  sectionButtons: sectionButtons ?? [
    macros.include("@bolt-components-button/button.twig", {
      style: "secondary",
      size: "small",
      border_radius: "full",
      text: "Show all (12)"
    }, false),
    macros.include("@bolt-components-button/button.twig", {
      style: "text",
      size: "large",
      text: "Add Missions",
      icon: {
        name: "add-open",
        position: "before"
      }
    }, false)
  ],
  useCarousel: useCarousel,
  contentItems: cardContentItems
} only %}
