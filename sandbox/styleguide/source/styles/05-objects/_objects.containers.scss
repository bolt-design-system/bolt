$bp-layout--article: 55rem; //magic for bill murray image positioning
$wrapper--max-width: map-get($breakpoints, xlarge);


body {
  width: 100%;
}

.o-layout {
  @include clearfix;

  width: 100vw;
  min-height: 100vh;
}

.o-layout--article {
  @include breakpoint(max-width $bp-layout--article) {
    > aside {
      .c-nav--vertical {
        @include text-align(center);
        @include border(bottom);
      }
    }

    > footer {
      @include padding(0,($gutter + rem),0,($gutter + rem));
      @include border(top);

      p {
        @include margin(0,0,0,0);

        line-height: $gutter*1.5;
        white-space: nowrap;
      }
    }
  }

  @include breakpoint(min-width $bp-layout--article) {
    width: 100vw;
    height: 100vh;

    > * {
      float: left;
    }

    > aside,
    > aside .c-nav--vertical {
      width: $golden-aside-width*1%;
      height: 100%;
    }

    > aside {
      &:before {
        display: block;
        content: '';
        height: 1px;
      }

      .c-nav--vertical {
        @include position(fixed,0,auto,auto,0);
        @include vertical-scroll;
        @include text-align(right);
        @include border(right);
      }
    }

    > main {
      width: $golden-main-width*1%;
    }

    > footer {
      writing-mode: vertical-rl;

      small {
        @include position(fixed,0,0,auto,auto);
        @include padding(($font-leading--base*2 + rem),0,($font-leading--base*2 + rem),0);

        height: 100%;
        line-height: $gutter*1.5/$font-scale--xsmall;
        white-space: nowrap;
      }

      p {
        @include null-spacing;
      }
    }

    article {
      @include margin(0,auto,0,auto);

      max-width: $article-line-length + ch;

      aside {
        @include margin(($font-leading--base + rem),calc(#{$gutter*1.5 + rem} - #{$golden-aside-width + vw}),($font-leading--base + rem),($gutter + rem));

        &:first-child {
          margin-top: 0;
        }
      }
    }
  }
}

.o-layout--fullscreen-hero {
  display: flex;
  flex-direction: column;

  .o-layout__main {
    display: flex;
    flex-direction: column;
    flex: auto;

    > * {
      @include margin(auto,auto,auto,auto);
    }
  }

  .o-layout__footer {
    @include margin(auto,0,0,0);
  }
}

.o-golden-two-column {
  @include respond-to(medium) {
    @include margin(0,(-$gutter + rem),0,(-$gutter + rem));

    display: flex;
    flex-wrap: wrap;

    > * {
      @include margin(0,($gutter + rem),0,($gutter + rem));

      flex-grow: 1;

      p,
      hr,
      figure,
      blockquote,
      ol, ul, dl,
      details, summary,
      h1, h2, h3, h4, h5, h6 {
        &:first-child {
          @include null-spacing;
        }
      }

      .c-heading {
        &:first-child {
          padding-top: 0;
        }
      }
    }

    .o-golden-two-column__main {
      flex-basis: $golden-main-width * 1%;
    }

    .o-golden-two-column__aside {
      flex-basis: $golden-aside-width * 1%;
    }
  }
}

.o-golden-two-column--center {
  @include respond-to(medium) {
    align-items: center;
  }
}

.o-wrapper {
  @include margin(0,auto,0,auto);

  max-width: $wrapper--max-width;
}

.o-inset {
  @include padding(($font-leading--base + rem),($gutter + rem),($font-leading--base + rem),($gutter + rem));

  @include respond-to(medium) {
    @include padding(($font-leading--base*2 + rem),($gutter*2 + rem),($font-leading--base*2 + rem),($gutter*2 + rem));
  }
}

.o-inset--x {
  padding-top: 0;
  padding-bottom: 0;
}

.o-inset--y {
  padding-right: 0;
  padding-left: 0;
}
