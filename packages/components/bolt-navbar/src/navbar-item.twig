{% import '@bolt-components-navbar/_navbar-macros.twig' as macros %}

{% set schema = bolt.data.components['@bolt-components-navbar'].schema['navbar-item'] %}
{% if enable_json_schema_validation %}
  {{ validate_data_schema(schema, _self)|raw }}
{% endif %}

{% set this = init(schema) %}
{% set attributes = create_attribute(attributes|default({})) %}
{% set inner_attributes = create_attribute({}) %}

{# Array of classes based on the defined + default props #}
{% set classes = [
  'c-bolt-navbar-item',
  'js-bolt-navbar-item',
  this.data.active.value is sameas(true) ? 'js-bolt-navbar-item--active' : ''
] %}

{% if this.data.url.value %}
  {% set inner_attributes = inner_attributes.setAttribute('href', this.data.url.value) %}
{% endif %}

{% if this.data.target.value %}
  {% set inner_attributes = inner_attributes.setAttribute('target', this.data.target.value) %}
{% endif %}

{# [data-scroll-ignore] opts out of automatic smoothscroll behavior, @see packages/bolt-smooth-scroll #}
{% set inner_attributes = inner_attributes.setAttribute('data-scroll-ignore', '') %}

{% if icon %}
  {% set icon_position = icon.position in schema.properties.icon.properties.position.enum ? icon.position : schema.properties.icon.properties.position.default %}
{% endif %}

<div {{ attributes.addClass(classes)|without('role')}} role="listitem">
  <div class="c-bolt-navbar-item__inner">
    {% spaceless %}
      <a {{ inner_attributes.addClass('c-bolt-navbar-item__link') }}>
        {{ macros.slotted_icon(icon, icon_position, 'before') }}
        <span class="c-bolt-navbar-item__text">{{ text }}</span>
        {{ macros.slotted_icon(icon, icon_position, 'after') }}
      </a>
    {% endspaceless %}
  </div>
</div>
