{% set componentName = "copy-to-clipboard" %} {# @todo: refactor to custom web component ASAP #}

{% set attributes = create_attribute(attributes|default({})) %}

{% set defaultText = "Copy Link" %}
{% set text = text | default(defaultText) %}
{% set attributes = attributes.setAttribute("text", text) %}

{% set defaultCopiedText = "Copied!" %}
{% set copiedText = copiedText | default(defaultCopiedText) %}
{% set attributes = attributes.setAttribute("copied-text", copiedText) %}

{% set defaultIconSize = "medium" %}
{% set iconSize = iconSize | default(defaultIconSize) %}
{% set attributes = attributes.setAttribute("icon-size", iconSize) %}

{% if url %}
  {% set attributes = attributes.setAttribute("url", url) %}
{% endif %}

<bolt-copy-to-clipboard>
  <div class="c-bolt-copy-to-clipboard js-bolt-copy-to-clipboard" {{ attributes }}>
    <span class="c-bolt-copy-to-clipboard__default">
      {% include "@bolt-components-link/link.twig" with {
        text: text,
        url: url,
        icon: {
          name: 'asset-link',
          position: 'before',
          size: iconSize
        },
        attributes: attributes.setAttribute('data-clipboard-text', url).setAttribute('target', '_blank').addClass('js-bolt-copy-to-clipboard__default')
      } only %}
    </span>
    <bolt-icon class="c-bolt-copy-to-clipboard__icon" name="refresh" size={{ iconSize }}></bolt-icon>

    <span class="c-bolt-copy-to-clipboard__copied">
      {% include "@bolt-components-link/link.twig" with {
        text: copiedText,
        url: url,
        icon: {
          name: 'asset-link',
          position: 'before',
          size: iconSize
        },
        attributes: attributes.removeClass('js-bolt-copy-to-clipboard__default')
      } only %}
    </span>
  </div>
</bolt-copy-to-clipboard>

{% if enable_json_schema_validation %}
  {{ validate_data_schema('@bolt-components-copy-to-clipboard/copy-to-clipboard.schema.yml', _self) | raw }}
{% endif %}